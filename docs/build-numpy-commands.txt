# Commands to Build numpy Wheel (Based on Error #2 Fix)

## Prerequisites (Install First)

```bash
# Install system build dependencies (required for patchelf, which numpy needs)
pkg install -y autoconf automake libtool make binutils clang cmake ninja

# Upgrade pip and install build tools
pip install --upgrade pip wheel build setuptools

# Install meson-python (numpy's build backend)
pip install "meson-python<0.19.0,>=0.16.0"
```

## Build numpy Wheel

```bash
# Set parallelism limits (prevents memory exhaustion)
export NINJAFLAGS="-j2"
export MAKEFLAGS="-j2"
export MAX_JOBS=2

# Navigate to wheels directory
cd ~/wheels

# Download numpy source
pip download numpy --dest . --no-cache-dir

# Build numpy wheel (patchelf will be built automatically if needed)
pip wheel numpy --no-deps --wheel-dir .

# Install numpy from wheel
pip install --find-links . --no-index numpy*.whl

# Verify
pip show numpy
python3 -c "import numpy; print('numpy version:', numpy.__version__)"
```

## One-Liner (Complete Sequence)

```bash
pkg install -y autoconf automake libtool make binutils clang cmake ninja && pip install --upgrade pip wheel build setuptools "meson-python<0.19.0,>=0.16.0" && export NINJAFLAGS="-j2" && export MAKEFLAGS="-j2" && export MAX_JOBS=2 && cd ~/wheels && pip download numpy --dest . --no-cache-dir && pip wheel numpy --no-deps --wheel-dir . && pip install --find-links . --no-index numpy*.whl && pip show numpy
```

## Via ADB (From Host Machine)

```bash
adb shell "run-as com.termux sh -c 'export PREFIX=/data/data/com.termux/files/usr && export HOME=/data/data/com.termux/files/home && export PATH=\$PREFIX/bin:\$PATH && pkg install -y autoconf automake libtool make binutils clang cmake ninja && pip install --upgrade pip wheel build setuptools \"meson-python<0.19.0,>=0.16.0\" && export NINJAFLAGS=\"-j2\" && export MAKEFLAGS=\"-j2\" && export MAX_JOBS=2 && cd ~/wheels && pip download numpy --dest . --no-cache-dir && pip wheel numpy --no-deps --wheel-dir . && pip install --find-links . --no-index numpy*.whl'"
```

## Notes

- **patchelf** is automatically built as a dependency of numpy if no pre-built wheel is available
- The build tools (autoconf, automake, etc.) are required for patchelf to build from source
- Build time: ~20-40 minutes
- Wheel size: ~15-20 MB
- This must be done BEFORE building scipy, pandas, or scikit-learn

## Why These Packages?

Based on Error #2 in termux-build-errors-and-solutions.md:
- numpy requires patchelf
- patchelf requires: autoconf, automake, libtool, make, binutils
- numpy also needs: clang, cmake, ninja, meson-python

